parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"vKFU":[function(require,module,exports) {

},{}],"u9vI":[function(require,module,exports) {
function n(n){var o=typeof n;return null!=n&&("object"==o||"function"==o)}module.exports=n;
},{}],"j3D9":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],t="object"==typeof e&&e&&e.Object===Object&&e;module.exports=t;
},{}],"MIhM":[function(require,module,exports) {
var e=require("./_freeGlobal"),t="object"==typeof self&&self&&self.Object===Object&&self,l=e||t||Function("return this")();module.exports=l;
},{"./_freeGlobal":"j3D9"}],"0pJf":[function(require,module,exports) {
var r=require("./_root"),e=function(){return r.Date.now()};module.exports=e;
},{"./_root":"MIhM"}],"wppe":[function(require,module,exports) {
var o=require("./_root"),r=o.Symbol;module.exports=r;
},{"./_root":"MIhM"}],"uiOY":[function(require,module,exports) {
var r=require("./_Symbol"),t=Object.prototype,e=t.hasOwnProperty,o=t.toString,a=r?r.toStringTag:void 0;function l(r){var t=e.call(r,a),l=r[a];try{r[a]=void 0;var c=!0}catch(n){}var i=o.call(r);return c&&(t?r[a]=l:delete r[a]),i}module.exports=l;
},{"./_Symbol":"wppe"}],"lPmd":[function(require,module,exports) {
var t=Object.prototype,o=t.toString;function r(t){return o.call(t)}module.exports=r;
},{}],"e5TX":[function(require,module,exports) {
var e=require("./_Symbol"),r=require("./_getRawTag"),o=require("./_objectToString"),t="[object Null]",i="[object Undefined]",n=e?e.toStringTag:void 0;function u(e){return null==e?void 0===e?i:t:n&&n in Object(e)?r(e):o(e)}module.exports=u;
},{"./_Symbol":"wppe","./_getRawTag":"uiOY","./_objectToString":"lPmd"}],"OuyB":[function(require,module,exports) {
function e(e){return null!=e&&"object"==typeof e}module.exports=e;
},{}],"bgO7":[function(require,module,exports) {
var e=require("./_baseGetTag"),r=require("./isObjectLike"),o="[object Symbol]";function t(t){return"symbol"==typeof t||r(t)&&e(t)==o}module.exports=t;
},{"./_baseGetTag":"e5TX","./isObjectLike":"OuyB"}],"iS0Z":[function(require,module,exports) {
var e=require("./isObject"),r=require("./isSymbol"),t=NaN,i=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,n=/^0o[0-7]+$/i,s=parseInt;function a(a){if("number"==typeof a)return a;if(r(a))return t;if(e(a)){var o="function"==typeof a.valueOf?a.valueOf():a;a=e(o)?o+"":o}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(i,"");var l=u.test(a);return l||n.test(a)?s(a.slice(2),l?2:8):f.test(a)?t:+a}module.exports=a;
},{"./isObject":"u9vI","./isSymbol":"bgO7"}],"CXfR":[function(require,module,exports) {
var i=require("./isObject"),t=require("./now"),n=require("./toNumber"),r="Expected a function",e=Math.max,u=Math.min;function o(o,a,f){var c,v,d,m,l,s,p=0,T=!1,h=!1,x=!0;if("function"!=typeof o)throw new TypeError(r);function g(i){var t=c,n=v;return c=v=void 0,p=i,m=o.apply(n,t)}function q(i){var t=i-s;return void 0===s||t>=a||t<0||h&&i-p>=d}function w(){var i=t();if(q(i))return y(i);l=setTimeout(w,function(i){var t=a-(i-s);return h?u(t,d-(i-p)):t}(i))}function y(i){return l=void 0,x&&c?g(i):(c=v=void 0,m)}function b(){var i=t(),n=q(i);if(c=arguments,v=this,s=i,n){if(void 0===l)return function(i){return p=i,l=setTimeout(w,a),T?g(i):m}(s);if(h)return l=setTimeout(w,a),g(s)}return void 0===l&&(l=setTimeout(w,a)),m}return a=n(a)||0,i(f)&&(T=!!f.leading,d=(h="maxWait"in f)?e(n(f.maxWait)||0,a):d,x="trailing"in f?!!f.trailing:x),b.cancel=function(){void 0!==l&&clearTimeout(l),p=0,c=s=v=l=void 0},b.flush=function(){return void 0===l?m:y(t())},b}module.exports=o;
},{"./isObject":"u9vI","./now":"0pJf","./toNumber":"iS0Z"}],"8iXM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("lodash/debounce"));function i(t){return t&&t.__esModule?t:{default:t}}function e(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function a(t,i){for(var e=0;e<i.length;e++){var a=i[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function n(t,i,e){return i&&a(t.prototype,i),e&&a(t,e),t}var s=function(){function i(t){var a=t.minHeight,n=void 0===a?10:a,s=t.width,r=void 0===s?window.innerWidth:s,h=t.height,o=void 0===h?window.innerHeight:h,d=t.gap,u=void 0===d?0:d,l=t.defaultSrc,c=void 0===l?"":l;e(this,i),this.audio=null,this.analyser=null,this.drawVisual=null,this.objectUrl=null,this.minHeight=n,this.width=r,this.height=o,this.singleWidth=r/2-u,this.defaultSrc=c,this.init()}return n(i,[{key:"init",value:function(){this.createAudio(),this.createCanvas();var i=document.createElement("div");i.className="music-container",i.style.cssText="position: fixed; left: 0; bottom: 0; width: 100%; height: 100%; pointer-events: none;",i.appendChild(this.canvas),document.body.appendChild(i),window.addEventListener("resize",(0,t.default)(this.resize.bind(this),100))}},{key:"resize",value:function(){this.width=window.innerWidth,this.height=window.innerHeight,this.singleWidth=this.width/2,this.canvas.width=this.width,this.canvas.height=this.height}},{key:"start",value:function(){var t=this;this.audio.src&&(!this.audio.paused&&this.audio.duration>0||(this.analyser||this.createAnalyser(),this.audio.play().then(function(){t.draw()})))}},{key:"stop",value:function(){this.drawVisual&&(window.cancelAnimationFrame(this.drawVisual),this.drawVisual=null),this.audio.pause()}},{key:"changeMusic",value:function(t){this.objectUrl&&window.URL.revokeObjectURL(this.objectUrl),this.objectUrl=window.URL.createObjectURL(t),this.stop(),this.audio.src=this.objectUrl,this.start()}},{key:"createAudio",value:function(){var t=new Audio;t.src=this.defaultSrc,t.preload="auto",t.volume=.8,t.loop=!0,t.crossOrigin="anonymous",this.audio=t}},{key:"createAnalyser",value:function(){var t=this.audio,i=new(window.AudioContext||window.webkitAudioContext),e=i.createMediaElementSource(t),a=i.createAnalyser();e.connect(a),a.connect(i.destination),a.fftSize=256,this.analyser=a}},{key:"createCanvas",value:function(){var t=document.createElement("canvas"),i=t.getContext("2d"),e=this.singleWidth;t.width=this.width,t.height=this.height;var a=i.createLinearGradient(0,0,e,0);a.addColorStop("0","#ff30a2"),a.addColorStop("1.0","#d8db31");var n=i.createLinearGradient(0,0,e,0);n.addColorStop("0","#00cf2e"),n.addColorStop("1.0","#3bddd2"),this.canvas=t,this.canvasCtx=i,this.gradientLeft=a,this.gradientRight=n}},{key:"getPoints",value:function(t,i){for(var e=this.height,a=this.minHeight,n=this.singleWidth,s=0,r=t.slice(0,-20),h=r.length,o=n/(h-1),d=0;d<h;d++){i(s,e/3*(r[d]/256)+a),s+=o}}},{key:"drawCurve",value:function(t,i,e,a){this.canvasCtx.quadraticCurveTo(t,i,(t+e)/2,(i+a)/2)}},{key:"drawGraph",value:function(t){var i=this,e=this.canvasCtx,a=this.minHeight,n=this.singleWidth;e.beginPath(),e.moveTo(0,0),e.lineTo(0,a);var s=0,r=a;this.getPoints(t,function(t,e){i.drawCurve(s,r,t,e),s=t,r=e}),this.drawCurve(s,r,n,a),e.lineTo(n,0),e.fill()}},{key:"drawLine",value:function(t){var i=this,e=this.canvasCtx,a=this.singleWidth,n=this.minHeight;e.beginPath(),e.moveTo(0,0);var s=0,r=0;this.getPoints(t,function(t,e){i.drawCurve(s,r,t,1.1*e),s=t,r=1.1*e}),this.drawCurve(s,r,a,n),e.stroke()}},{key:"draw",value:function(){var t=this.analyser,i=this.canvasCtx,e=this.gradientLeft,a=this.gradientRight,n=this.width,s=this.height,r=t.frequencyBinCount-5,h=new Uint8Array(r);t.getByteFrequencyData(h),i.clearRect(0,0,n,s),i.save(),i.transform(1,0,0,-1,0,s),i.fillStyle=e,i.strokeStyle=e,this.drawGraph(h),this.drawLine(h),i.restore(),i.save(),i.transform(-1,0,0,-1,n,s),i.fillStyle=a,i.strokeStyle=a,this.drawGraph(h),this.drawLine(h),i.restore(),this.drawVisual=requestAnimationFrame(this.draw.bind(this))}}]),i}(),r=s;exports.default=r;
},{"lodash/debounce":"CXfR"}],"/Xnp":[function(require,module,exports) {
module.exports="canon.29d696e1.mp3";
},{}],"Focm":[function(require,module,exports) {
"use strict";require("./index.css");var e=n(require("./music")),t=n(require("./canon.mp3"));function n(e){return e&&e.__esModule?e:{default:e}}var a=new e.default({defaultSrc:t.default}),i=document.getElementById("play"),d=document.getElementById("fileElem"),o="loading";function r(){a.start(),o="play",i.textContent="暂停"}function u(){a.stop(),o="stop",i.textContent="播放"}i.textContent="加载中…",a.audio.addEventListener("canplay",function(){"loading"===o&&(o="loaded",i.textContent="播放")}),a.audio.addEventListener("error",function(){this.error.code&&alert("加载资源失败, 请自行选择歌曲")}),i.addEventListener("click",function(){"loading"!==o&&("play"===o?u():r())}),d.addEventListener("change",function(e){var t=e.target.files;a.changeMusic(t[0])});
},{"./index.css":"vKFU","./music":"8iXM","./canon.mp3":"/Xnp"}]},{},["Focm"], null)