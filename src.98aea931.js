parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"vKFU":[function(require,module,exports) {

},{}],"u9vI":[function(require,module,exports) {
function n(n){var o=typeof n;return null!=n&&("object"==o||"function"==o)}module.exports=n;
},{}],"j3D9":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3],t="object"==typeof e&&e&&e.Object===Object&&e;module.exports=t;
},{}],"MIhM":[function(require,module,exports) {
var e=require("./_freeGlobal"),t="object"==typeof self&&self&&self.Object===Object&&self,l=e||t||Function("return this")();module.exports=l;
},{"./_freeGlobal":"j3D9"}],"0pJf":[function(require,module,exports) {
var r=require("./_root"),e=function(){return r.Date.now()};module.exports=e;
},{"./_root":"MIhM"}],"wppe":[function(require,module,exports) {
var o=require("./_root"),r=o.Symbol;module.exports=r;
},{"./_root":"MIhM"}],"uiOY":[function(require,module,exports) {
var r=require("./_Symbol"),t=Object.prototype,e=t.hasOwnProperty,o=t.toString,a=r?r.toStringTag:void 0;function l(r){var t=e.call(r,a),l=r[a];try{r[a]=void 0;var c=!0}catch(n){}var i=o.call(r);return c&&(t?r[a]=l:delete r[a]),i}module.exports=l;
},{"./_Symbol":"wppe"}],"lPmd":[function(require,module,exports) {
var t=Object.prototype,o=t.toString;function r(t){return o.call(t)}module.exports=r;
},{}],"e5TX":[function(require,module,exports) {
var e=require("./_Symbol"),r=require("./_getRawTag"),o=require("./_objectToString"),t="[object Null]",i="[object Undefined]",n=e?e.toStringTag:void 0;function u(e){return null==e?void 0===e?i:t:n&&n in Object(e)?r(e):o(e)}module.exports=u;
},{"./_Symbol":"wppe","./_getRawTag":"uiOY","./_objectToString":"lPmd"}],"OuyB":[function(require,module,exports) {
function e(e){return null!=e&&"object"==typeof e}module.exports=e;
},{}],"bgO7":[function(require,module,exports) {
var e=require("./_baseGetTag"),r=require("./isObjectLike"),o="[object Symbol]";function t(t){return"symbol"==typeof t||r(t)&&e(t)==o}module.exports=t;
},{"./_baseGetTag":"e5TX","./isObjectLike":"OuyB"}],"iS0Z":[function(require,module,exports) {
var e=require("./isObject"),r=require("./isSymbol"),t=NaN,i=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,n=/^0o[0-7]+$/i,s=parseInt;function a(a){if("number"==typeof a)return a;if(r(a))return t;if(e(a)){var o="function"==typeof a.valueOf?a.valueOf():a;a=e(o)?o+"":o}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(i,"");var l=u.test(a);return l||n.test(a)?s(a.slice(2),l?2:8):f.test(a)?t:+a}module.exports=a;
},{"./isObject":"u9vI","./isSymbol":"bgO7"}],"CXfR":[function(require,module,exports) {
var i=require("./isObject"),t=require("./now"),n=require("./toNumber"),r="Expected a function",e=Math.max,u=Math.min;function o(o,a,f){var c,v,d,m,l,s,p=0,T=!1,h=!1,x=!0;if("function"!=typeof o)throw new TypeError(r);function g(i){var t=c,n=v;return c=v=void 0,p=i,m=o.apply(n,t)}function q(i){var t=i-s;return void 0===s||t>=a||t<0||h&&i-p>=d}function w(){var i=t();if(q(i))return y(i);l=setTimeout(w,function(i){var t=a-(i-s);return h?u(t,d-(i-p)):t}(i))}function y(i){return l=void 0,x&&c?g(i):(c=v=void 0,m)}function b(){var i=t(),n=q(i);if(c=arguments,v=this,s=i,n){if(void 0===l)return function(i){return p=i,l=setTimeout(w,a),T?g(i):m}(s);if(h)return l=setTimeout(w,a),g(s)}return void 0===l&&(l=setTimeout(w,a)),m}return a=n(a)||0,i(f)&&(T=!!f.leading,d=(h="maxWait"in f)?e(n(f.maxWait)||0,a):d,x="trailing"in f?!!f.trailing:x),b.cancel=function(){void 0!==l&&clearTimeout(l),p=0,c=s=v=l=void 0},b.flush=function(){return void 0===l?m:y(t())},b}module.exports=o;
},{"./isObject":"u9vI","./now":"0pJf","./toNumber":"iS0Z"}],"28Ib":[function(require,module,exports) {
module.exports="Because Of You.c7d2e44a.m4a";
},{}],"8iXM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("lodash/debounce")),e=i(require("./Because Of You.m4a"));function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,i){return e&&a(t.prototype,e),i&&a(t,i),t}var r=function(){function i(){n(this,i),this.audio=null,this.analyser=null,this.drawVisual=null,this.minHeight=10,this.width=window.innerWidth,this.height=window.innerHeight,this.singleWidth=this.width/2,this.defaultSrc=e.default,this.objectUrl=null,this.init()}return s(i,[{key:"init",value:function(){this.createAudio(),this.createAnalyser(),this.createCanvas();var e=document.createElement("div");e.className="music-container",e.style.cssText="position: fixed; left: 0; bottom: 0; width: 100%; height: 100%; pointer-events: none;",e.appendChild(this.canvas),document.body.appendChild(e),window.addEventListener("resize",(0,t.default)(this.resize.bind(this),100))}},{key:"resize",value:function(){this.width=window.innerWidth,this.height=window.innerHeight,this.singleWidth=this.width/2,this.canvas.width=this.width,this.canvas.height=this.height}},{key:"start",value:function(){var t=this;!this.audio.paused&&this.audio.duration>0||this.audio.play().then(function(){t.draw()})}},{key:"stop",value:function(){this.drawVisual&&(window.cancelAnimationFrame(this.drawVisual),this.drawVisual=null),this.audio.pause()}},{key:"changeMusic",value:function(t){this.objectUrl&&window.URL.revokeObjectURL(this.objectUrl),this.objectUrl=window.URL.createObjectURL(t),this.stop(),this.audio.src=this.objectUrl,this.start()}},{key:"createAudio",value:function(){var t=new Audio;t.src=this.defaultSrc,t.preload="auto",t.volume=.8,t.loop=!0,t.crossOrigin="anonymous",this.audio=t}},{key:"createAnalyser",value:function(){var t=this.audio,e=new(window.AudioContext||window.webkitAudioContext),i=e.createMediaElementSource(t),n=e.createAnalyser();i.connect(n),n.connect(e.destination),n.fftSize=256,this.analyser=n}},{key:"createCanvas",value:function(){var t=document.createElement("canvas"),e=t.getContext("2d"),i=this.singleWidth;t.width=this.width,t.height=this.height;var n=e.createLinearGradient(0,0,i,0);n.addColorStop("0","#ff30a2"),n.addColorStop("1.0","#d8db31");var a=e.createLinearGradient(0,0,i,0);a.addColorStop("0","#00cf2e"),a.addColorStop("1.0","#3bddd2"),this.canvas=t,this.canvasCtx=e,this.gradientLeft=n,this.gradientRight=a}},{key:"getPoints",value:function(t,e){for(var i=this.height,n=this.minHeight,a=this.singleWidth,s=0,r=t.slice(0,-20),h=r.length,o=a/(h-1),d=0;d<h;d++){e(s,i/2*(r[d]/256)+n),s+=o}}},{key:"drawCurve",value:function(t,e,i,n){this.canvasCtx.quadraticCurveTo(t,e,(t+i)/2,(e+n)/2)}},{key:"drawGraph",value:function(t){var e=this,i=this.canvasCtx,n=this.minHeight,a=this.singleWidth;i.beginPath(),i.moveTo(0,0),i.lineTo(0,n);var s=0,r=n;this.getPoints(t,function(t,i){e.drawCurve(s,r,t,i),s=t,r=i}),this.drawCurve(s,r,a,n),i.lineTo(a,0),i.fill()}},{key:"drawLine",value:function(t){var e=this,i=this.canvasCtx,n=this.singleWidth,a=this.minHeight;i.beginPath(),i.moveTo(0,0);var s=0,r=0;this.getPoints(t,function(t,i){e.drawCurve(s,r,t,1.1*i),s=t,r=1.1*i}),this.drawCurve(s,r,n,a),i.stroke()}},{key:"draw",value:function(){var t=this.analyser,e=this.canvasCtx,i=this.gradientLeft,n=this.gradientRight,a=this.width,s=this.height,r=t.frequencyBinCount-5,h=new Uint8Array(r);t.getByteFrequencyData(h),e.clearRect(0,0,a,s),e.save(),e.transform(1,0,0,-1,0,s),e.fillStyle=i,e.strokeStyle=i,this.drawGraph(h),this.drawLine(h),e.restore(),e.save(),e.transform(-1,0,0,-1,a,s),e.fillStyle=n,e.strokeStyle=n,this.drawGraph(h),this.drawLine(h),e.restore(),this.drawVisual=requestAnimationFrame(this.draw.bind(this))}}]),i}(),h=r;exports.default=h;
},{"lodash/debounce":"CXfR","./Because Of You.m4a":"28Ib"}],"Focm":[function(require,module,exports) {
"use strict";require("./index.css");var e=t(require("./music"));function t(e){return e&&e.__esModule?e:{default:e}}var n=new e.default,i=document.getElementById("play"),a=document.getElementById("fileElem"),u="loading";function c(){n.start(),u="play",i.textContent="暂停"}function d(){n.stop(),u="stop",i.textContent="播放"}i.textContent="加载中…",n.audio.addEventListener("canplay",function(){c()}),i.addEventListener("click",function(){"loading"!==u&&("play"===u?d():c())}),a.addEventListener("change",function(e){var t=e.target.files;n.changeMusic(t[0])});
},{"./index.css":"vKFU","./music":"8iXM"}]},{},["Focm"], null)